# Generated by using Rcpp::compileAttributes() -> do not edit by hand
# Generator token: 10BE3573-1514-4C36-9D1C-5A225CD40393

#' Bayesian Bradley-Terry model for single game
#' 
#' Calculates Glicko ratings based on Bayesian Bradley Terry model.
#' 
#' Algorithm based on 'A Bayesian Approximation Method for Online Ranking' by Ruby C. Weng and Chih-Jen Lin
#' @param rank.
#' @param r ratings of participants.
#' @param rd rating deviations of participants.
#' @param kappa
#' @param gamma
#' @return \code{r} updated ratings of participats
#' @return \code{rd} updated deviations of participants ratings
#' @return \code{expected} matrix of expected score. \code{expected[i, j] = P(i > j)} 
#' @export
bbt <- function(teams, rank, r, rd, kappa = 0.0001, gamma = 1.0) {
    .Call('_sport_bbt', PACKAGE = 'sport', teams, rank, r, rd, kappa, gamma)
}

#' Bayesian Bradley-Terry model for single game
#' 
#' Calculates Glicko ratings based on Bayesian Bradley Terry model.
#' 
#' Algorithm based on 'A Bayesian Approximation Method for Online Ranking' by Ruby C. Weng and Chih-Jen Lin
#' @param teams player/team names.
#' @param rank.
#' @param X Matrix of coefficients (ratings).
#' @param H Matrix of player specifics.
#' @param S Matrix of coefficients deviations
#' @return \code{r} updated ratings of participats
#' @return \code{rd} updated deviations of participants ratings
#' @return \code{expected} matrix of expected score. \code{expected[i, j] = P(i > j)} 
#' @export
bdl <- function(teams, rank, R, X, RD, map) {
    .Call('_sport_bdl', PACKAGE = 'sport', teams, rank, R, X, RD, map)
}

#' Bayesian Bradley-Terry model for single game
#' 
#' Calculates Glicko ratings based on Bayesian Bradley Terry model.
#' 
#' Algorithm based on 'A Bayesian Approximation Method for Online Ranking' by Ruby C. Weng and Chih-Jen Lin
#' @param teams player/team names.
#' @param rank.
#' @param R Matrix of coefficients (ratings).
#' @param X Matrix of player specifics.
#' @param RD Matrix of coefficients deviations
#' @return \code{r} updated ratings of participats
#' @return \code{rd} updated deviations of participants ratings
#' @return \code{expected} matrix of expected score. \code{expected[i, j] = P(i > j)} 
#' @export
ddl <- function(teams, rank, R, X, RD) {
    .Call('_sport_ddl', PACKAGE = 'sport', teams, rank, R, X, RD)
}

#' FIDE rating for single game
#' 
#' FIDE Rating Regulations effective from 1 July 2014
#' 
#' @param teams name of event participants.
#' @param rank classification of the event.
#' @param days days after previous match - indicator multiplying uncertainty of expectations.
#' @param r ratings of participants.
#' @param rd rating deviations of participants.
#' @param init_r initial rating for new competitors (contains NA). Default = 1500
#' @param init_rd initial rating deviations for new competitors. Default = 350
#' @examples
#'elo(
#'  teams = c( "A", "B", "C", "D", "E", "F" ), 
#'  rank  = c( 3, 2, 3, 5, 6, 1), 
#'  r     = c( 1613, 1609, 1477, 1388, 1586, 1720 ) , 
#'  init_r  = 1500,
#'  init_rd = 100
#')
#' @export
fide <- function(teams, rank, r, K = 32L, init_r = 1500, init_rd = 350) {
    .Call('_sport_fide', PACKAGE = 'sport', teams, rank, r, K, init_r, init_rd)
}

#' Glicko rating for single game
#' 
#' Calculates Glicko rating for single game input
#' 
#' @param teams name of event participants.
#' @param rank classification of the event.
#' @param days days after previous match - indicator multiplying uncertainty of expectations.
#' @param r ratings of participants.
#' @param rd rating deviations of participants.
#' @param init_r initial rating for new competitors (contains NA). Default = 1500
#' @param init_rd initial rating deviations for new competitors. Default = 350
#' @return \code{r} updated ratings of participats
#' @return \code{rd} updated deviations of participants ratings
#' @return \code{expected} matrix of expected score. \code{expected[i, j] = P(i > j)} 
#' @examples
#'glicko(
#'  teams = c( "A", "B", "C", "D" ), 
#'  rank  = c( 3, 4, 1, 2 ), 
#'  days  = c( 0, 0, 0, 0),
#'  r     = c( 1500, 1400, 1550, 1700 ) , 
#'  rd    = c( 200,  30,   100,  300 ),
#'  init_r  = 1500,
#'  init_rd = 100
#')
#'glicko(
#' teams = c( "A", "B" ), 
#'   rank  = c( 1, 2 ), 
#'   days  = c( 0, 0),
#'   r     = c( 1400, 1500 ) , 
#'   rd    = c( 80,  150),
#'   init_r  = 1500,
#'   init_rd = 100
#')
#' @export
glicko <- function(teams, rank, r, rd, days = as.numeric( c(0)), init_r = 1500.00, init_rd = 350.00, gamma = 1) {
    .Call('_sport_glicko', PACKAGE = 'sport', teams, rank, r, rd, days, init_r, init_rd, gamma)
}

#' Glicko rating for single game
#' 
#' Calculates Glicko rating for single game input
#' 
#' @param teams name of event participants.
#' @param rank classification of the event.
#' @param days days after previous match - indicator multiplying uncertainty of expectations.
#' @param r ratings of participants.
#' @param rd rating deviations of participants.
#' @param init_r initial rating for new competitors (contains NA). Default = 1500
#' @param init_rd initial rating deviations for new competitors. Default = 350
#' @return \code{r} updated ratings of participats
#' @return \code{rd} updated deviations of participants ratings
#' @return \code{expected} matrix of expected score. \code{expected[i, j] = P(i > j)} 
#' @examples
#'glicko2(
#'  teams = c( "A", "B", "C", "D" ), 
#'  rank  = c( 3, 4, 1, 2 ), 
#'  days  = c( 0, 0, 0, 0),
#'  r     = c( 1500, 1400, 1550, 1700 ) , 
#'  rd    = c( 200,  30,   100,  300 ),
#'  sig   = c( .06, .06, .05, .07),
#'  tau   = .5,
#'  init_r  = 1500,
#'  init_rd = 100
#')
#' @export
glicko2 <- function(teams, rank, r, rd, sig, days = as.numeric( c(0)), tau = .5, init_r = 1500.00, init_rd = 350.00) {
    .Call('_sport_glicko2', PACKAGE = 'sport', teams, rank, r, rd, sig, days, tau, init_r, init_rd)
}

#' Gonzo rating for single game
#' 
#' Calculates Gonzo rating for single game input
#' 
#' @export
gonzo <- function(rank, mi_i, sig_i) {
    .Call('_sport_gonzo', PACKAGE = 'sport', rank, mi_i, sig_i)
}

#' Harkness rating for single game
#' 
#' Calculates Harkness rating for single game input
#' 
#' @param teams name of event participants.
#' @param rank classification of the event.
#' @param days days after previous match - indicator multiplying uncertainty of expectations.
#' @param r ratings of participants.
#' @param rd rating deviations of participants.
#' @param init_r initial rating for new competitors (contains NA). Default = 1500
#' @param init_rd initial rating deviations for new competitors. Default = 350
#' @examples
#'  teams <- c("A","B","C","D")
#'  rank  <- c(3 , 4 , 1, 2)
#'  days  <- rep(0, 4)
#'  r     <- c(1500, 1400, 1550, 1700) 
#'  rd    <- c(200,  30,   100,  300)
#'  harkness(
#'    teams = teams, 
#'    rank  = rank, 
#'    days  = days,
#'    r     = r, 
#'    rd    = rd,
#'    init_r  = 1500,
#'    init_rd = 100)
#' @export
harkness <- function(teams, rank, days, r, rd, init_r = 1500, init_rd = 350) {
    .Call('_sport_harkness', PACKAGE = 'sport', teams, rank, days, r, rd, init_r, init_rd)
}

#' Kalman filter for single game
#' 
#' Calculates score by smoothing
#' 
#' @param teams name of event participants.
#' @param rank classification of the event.
#' @param days days after previous match - indicator multiplying uncertainty of expectations.
#' @param r ratings of participants.
#' @param rd rating deviations of participants.
#' @param init_r initial rating for new competitors (contains NA). Default = 1500
#' @param init_rd initial rating deviations for new competitors. Default = 350
#' @return \code{r} updated ratings of participats
#' @return \code{rd} updated deviations of participants ratings
#' @return \code{expected} matrix of expected score. \code{expected[i, j] = P(i > j)} 
#' @examples
#' B <- diag(4)
#' diag(B) <- c( 200,  30,   100,  300 ) 
#'KF(
#'  x    = c( 1500, 1400, 1550, 1700 ) , 
#'  F    = B,
#'  B    = matrix(c( 200,  30,   100,  300 ),2),
#'  u    = c( 3, 4, 2, 1),
#'  z    = c(3,4,2,1),
#'  H    = matrix(c( .06, .06, .05, .07),2)
#')
#' @export
KF <- function(x, F, B, u, z, H) {
    .Call('_sport_KF', PACKAGE = 'sport', x, F, B, u, z, H)
}

#' Calculate points
#' 
#' Calculates points of \code{event_id} participant with given parameters
#' 
#' @param x A single integer.
#' @export
pointsCalc <- function(event_id, team_name, score) {
    .Call('_sport_pointsCalc', PACKAGE = 'sport', event_id, team_name, score)
}

#' Streak length of vector elements
#' 
#' Calculates series of consecutive elements
#' 
#' @param x A single integer.
#' @examples
#' x <- c(1,1,0,0,1,0,3,3,1,1)
#' streakLength(x)
#' @export
running_mean <- function(vec) {
    .Call('_sport_running_mean', PACKAGE = 'sport', vec)
}

